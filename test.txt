import { Injectable } from '@angular/core';
import { OAuthService, TokenResponse } from 'angular-oauth2-oidc';
import { HttpHeaders } from '@angular/common/http';

@Injectable()
export class CustomAuthService extends OAuthService {

  // ‚úÖ Properly override the parent method
  protected override async fetchTokenUsingGrant(
    grantType: string,
    parameters: Record<string, string>,
    headers?: HttpHeaders
  ): Promise<TokenResponse> {

    console.log('%cüî• Custom fetchTokenUsingGrant called', 'color: lime; font-weight: bold');

    // üß© Inject your custom parameters only for the token request
    if (grantType === 'authorization_code') {
      parameters['custom_param_1'] = 'value1';
      parameters['custom_param_2'] = 'value2';
    }

    // üîÅ Call the original implementation from the base class
    return super.fetchTokenUsingGrant(grantType, parameters, headers);
  }
}



import { CustomOAuthService } from './services/custom-oauth.service';

@NgModule({
  providers: [
    { provide: OAuthService, useClass: CustomOAuthService }
  ]
})
export class AppModule {}



bootstrapApplication(AppComponent, {
  providers: [
    { provide: OAuthService, useClass: CustomOAuthService }
  ]
});





